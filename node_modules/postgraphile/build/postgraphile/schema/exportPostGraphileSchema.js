"use strict";
const fs_1 = require("fs");
const graphql_1 = require("graphql");
const utilities_1 = require("graphql/utilities");
async function writeFileAsync(path, contents) {
    await new Promise((resolve, reject) => {
        fs_1.writeFile(path, contents, error => {
            if (error)
                reject(error);
            else
                resolve();
        });
    });
}
/**
 * Exports a PostGraphile schema by looking at a Postgres client.
 */
async function exportPostGraphileSchema(schema, options = {}) {
    // JSON version
    if (typeof options.exportJsonSchemaPath === 'string') {
        const result = await graphql_1.graphql(schema, utilities_1.introspectionQuery);
        await writeFileAsync(options.exportJsonSchemaPath, JSON.stringify(result, null, 2));
    }
    // Schema language version
    if (typeof options.exportGqlSchemaPath === 'string') {
        await writeFileAsync(options.exportGqlSchemaPath, utilities_1.printSchema(schema));
    }
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = exportPostGraphileSchema;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwb3J0UG9zdEdyYXBoaWxlU2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Bvc3RncmFwaGlsZS9zY2hlbWEvZXhwb3J0UG9zdEdyYXBoaWxlU2NoZW1hLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSwyQkFBOEI7QUFDOUIscUNBQWdEO0FBQ2hELGlEQUFtRTtBQUVuRSxLQUFLLHlCQUNILElBQVksRUFDWixRQUFnQjtJQUVoQixNQUFNLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU07UUFDaEMsY0FBUyxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSztZQUM3QixFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUM7Z0JBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3hCLElBQUk7Z0JBQUMsT0FBTyxFQUFFLENBQUE7UUFDaEIsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUM7QUFFRDs7R0FFRztBQUNZLEtBQUssbUNBQ2xCLE1BQXFCLEVBQ3JCLFVBR0ksRUFBRTtJQUVOLGVBQWU7SUFDZixFQUFFLENBQUMsQ0FBQyxPQUFPLE9BQU8sQ0FBQyxvQkFBb0IsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3JELE1BQU0sTUFBTSxHQUFHLE1BQU0saUJBQU8sQ0FBQyxNQUFNLEVBQUUsOEJBQWtCLENBQUMsQ0FBQTtRQUN4RCxNQUFNLGNBQWMsQ0FBQyxPQUFPLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDckYsQ0FBQztJQUVELDBCQUEwQjtJQUMxQixFQUFFLENBQUMsQ0FBQyxPQUFPLE9BQU8sQ0FBQyxtQkFBbUIsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE1BQU0sY0FBYyxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRSx1QkFBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUE7SUFDeEUsQ0FBQztBQUNILENBQUM7O0FBakJELDJDQWlCQyJ9